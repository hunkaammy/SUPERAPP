<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nandini - Strict Mistress Chatbot</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            transition: background 0.3s;
        }
        body.dark {
            background: linear-gradient(135deg, #1a1a1a, #2c2c2c);
            color: #fff;
        }
        body.light {
            background: linear-gradient(135deg, #f0f0f0, #d9d9d9);
            color: #000;
        }
        .chat-container {
            width: 100%;
            max-width: 700px;
            background: #222;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }
        body.light .chat-container {
            background: #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chat-header {
            background: linear-gradient(90deg, #ff4081, #f50057);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            border-bottom: 3px solid #ff1f62;
            cursor: pointer;
        }
        .chat-box {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: #2a2a2a;
            scrollbar-width: thin;
            scrollbar-color: #ff4081 #333;
        }
        body.light .chat-box {
            background: #f5f5f5;
            scrollbar-color: #ff4081 #ccc;
        }
        .chat-box::-webkit-scrollbar {
            width: 8px;
        }
        .chat-box::-webkit-scrollbar-thumb {
            background: #ff4081;
            border-radius: 10px;
        }
        .chat-box::-webkit-scrollbar-track {
            background: #333;
        }
        body.light .chat-box::-webkit-scrollbar-track {
            background: #ccc;
        }
        .message {
            margin: 10px 0;
            padding: 12px 18px;
            border-radius: 15px;
            max-width: 75%;
            word-wrap: break-word;
            display: inline-block;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
            position: relative;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .user-message {
            background: linear-gradient(135deg, #b0bec5, #90a4ae);
            text-align: right;
            color: #000;
            margin-left: auto;
        }
        .mistress-message {
            background: linear-gradient(135deg, #ff4081, #f50057);
            text-align: left;
        }
        .typing {
            color: #aaa;
            font-style: italic;
            margin: 10px 0;
            padding: 12px;
        }
        body.light .typing {
            color: #666;
        }
        .input-area {
            display: flex;
            padding: 15px;
            background: #222;
            border-top: 1px solid #ff4081;
        }
        body.light .input-area {
            background: #fff;
            border-top: 1px solid #ccc;
        }
        input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 25px 0 0 25px;
            background: #333;
            color: #fff;
            outline: none;
            font-size: 16px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        body.light input {
            background: #e0e0e0;
            color: #000;
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #ff4081, #f50057);
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, background 0.3s;
        }
        button:hover {
            background: linear-gradient(90deg, #f50057, #ff4081);
            transform: scale(1.05);
        }
        .action-buttons {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            background: #222;
        }
        body.light .action-buttons {
            background: #fff;
        }
        .action-buttons button {
            padding: 8px 15px;
            font-size: 14px;
            border-radius: 20px;
        }
        .copy-btn {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 12px;
            padding: 5px 10px;
            background: #555;
            border-radius: 10px;
        }
        body.light .copy-btn {
            background: #ccc;
            color: #000;
        }
        .gallery {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
        }
        body.light .gallery {
            background: rgba(255, 255, 255, 0.9);
        }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            padding: 20px;
        }
        .gallery-grid img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .gallery-grid img:hover {
            transform: scale(1.05);
        }
        .enlarged-image {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        body.light .enlarged-image {
            background: rgba(255, 255, 255, 0.95);
        }
        .enlarged-image img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 30px;
            color: #fff;
            cursor: pointer;
        }
        body.light .close-btn {
            color: #000;
        }
        .scenario-selector {
            padding: 10px 20px;
            background: #222;
        }
        body.light .scenario-selector {
            background: #fff;
        }
        select {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            background: #333;
            color: #fff;
            border: none;
        }
        body.light select {
            background: #e0e0e0;
            color: #000;
        }
        .typing-speed {
            padding: 10px 20px;
            background: #222;
        }
        body.light .typing-speed {
            background: #fff;
        }
    </style>
</head>
<body class="dark">
    <div class="chat-container">
        <div class="chat-header" onclick="toggleGallery()">
            <img src="https://via.placeholder.com/50/FF4081/FFFFFF?text=N" alt="Nandini DP">
            <h2>Nandini</h2>
        </div>
        <div class="scenario-selector">
            <select id="scenarioSelect" onchange="setScenario()">
                <option value="">Scenario Chuno</option>
                <option value="Tujhe ek purani haveli ke kamre mein le gayi, waha ek bade se darwaze ke peeche tujhe khada karke haath bandhe">Haveli</option>
                <option value="Tujhe jungle mein ek ped ke saath bandha, tere dono haath upar tight kiye">Jungle</option>
                <option value="Tujhe bathroom mein le jaake shower ke neeche khada kiya, tere haath pipe se bandhe">Bathroom</option>
                <option value="Tujhe ek gaddi ke bonnet pe lita ke tere haath peeche bandhe">Car</option>
            </select>
        </div>
        <div class="chat-box" id="chatBox"></div>
        <div class="typing-speed">
            <label for="typingSpeed">Typing Speed: </label>
            <input type="range" id="typingSpeed" min="500" max="3000" value="1000" onchange="updateTypingSpeed()">
        </div>
        <div class="action-buttons">
            <button onclick="toggleTheme()">Theme Badlo</button>
            <button onclick="clearChat()">Chat Clear Karo</button>
        </div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Nandini se baat kar!">
            <button onclick="sendMessage()">Bhej</button>
        </div>
    </div>

    <!-- Gallery -->
    <div class="gallery" id="gallery">
        <span class="close-btn" onclick="toggleGallery()">×</span>
        <div class="gallery-grid" id="galleryGrid">
            <img src="https://via.placeholder.com/150/FF4081/FFFFFF?text=Femdom1" alt="Femdom 1">
            <img src="https://via.placeholder.com/150/FF4081/FFFFFF?text=Femdom2" alt="Femdom 2">
            <img src="https://via.placeholder.com/150/FF4081/FFFFFF?text=Femdom3" alt="Femdom 3">
            <img src="https://via.placeholder.com/150/FF4081/FFFFFF?text=Femdom4" alt="Femdom 4">
            <img src="https://via.placeholder.com/150/FF4081/FFFFFF?text=Femdom5" alt="Femdom 5">
        </div>
    </div>

    <!-- Enlarged Image -->
    <div class="enlarged-image" id="enlargedImage">
        <span class="close-btn" onclick="closeEnlargedImage()">×</span>
        <img id="enlargedImg" src="" alt="Enlarged Image">
    </div>

    <script>
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        const gallery = document.getElementById('gallery');
        const galleryGrid = document.getElementById('galleryGrid');
        const enlargedImage = document.getElementById('enlargedImage');
        const enlargedImg = document.getElementById('enlargedImg');
        const scenarioSelect = document.getElementById('scenarioSelect');
        let chatHistory = [];
        let currentScenario = null;
        let typingDelay = 1000; // Default typing speed

        function addMessage(message, className) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${className}`;
            msgDiv.textContent = message;
            const copyBtn = document.createElement('button');
            copyBtn.textContent = 'Copy';
            copyBtn.className = 'copy-btn';
            copyBtn.onclick = () => navigator.clipboard.writeText(message);
            msgDiv.appendChild(copyBtn);
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message typing';
            typingDiv.textContent = 'typing...';
            typingDiv.id = 'typingIndicator';
            chatBox.appendChild(typingDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            return typingDiv;
        }

        function removeTypingIndicator() {
            const typingDiv = document.getElementById('typingIndicator');
            if (typingDiv) typingDiv.remove();
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (message === '') return;

            addMessage(message, 'user-message');

            const typingDiv = addTypingIndicator();

            const apiKeyGemini = "AIzaSyB_eDEcv0TA2gWEJ7dJ3hJ0ExWwrXgcOzw"; // Gemini API key
            const historyString = chatHistory.map(entry => 
                `Slave: ${entry.slave}\nNandini: ${entry.mistress}`
            ).join('\n');

            let scenarioPrompt;
            if (!currentScenario) {
                currentScenario = scenarioSelect.value || "Tujhe ek purani haveli ke kamre mein le gayi, waha ek bade se darwaze ke peeche tujhe khada karke haath bandhe";
                scenarioPrompt = `Pehla scene yeh hai: "${currentScenario}". Is scene ke saath kahani shuru kar aur aage badha.`;
            } else {
                scenarioPrompt = `Pehla scene jo shuru hua tha: "${currentScenario}". Isi scene ke saath kahani aage badha, naya twist daal.`;
            }

            const punishments = [
                "tujhe 10 thappad marungi",
                "ek ghante tak bandha rakhungi",
                "tere muh pe thook dungi",
                "tujhe nanga karke tadpaungi"
            ];
            const randomPunishment = message.toLowerCase().includes("nahi") || message.toLowerCase().includes("sorry") 
                ? `Aur saza ke taur pe ${punishments[Math.floor(Math.random() * punishments.length)]}.` 
                : "";

            const prompt = `
                Tu ek strict Mistress hai, tera naam Nandini hai, aur tu sirf pure Hinglish mein baat karegi, 
                ek bhi English shabd nahi aana chahiye. Slave ka naya message hai: "${message}". Isse bahut 
                zyada sensual, aggressive aur cruel tareeke se jawab de, reply ko ek kahani ka scene jaisa 
                bana jo shuru hue scene ke saath aage badhe, jaise tu slave ke saath kuch dark, flirty aur 
                bhadkau cheez kar rahi hai. ${scenarioPrompt} Hinglish ke shabd jaise "mere saamne jhuk ja re", 
                "tu mera kutta banega", "mazze se tujhe tadpaungi" use kar, par "dil se dil tak" mat bolna. 
                Aur sensual banane ke liye spicy details jaise "teri saanso ko mehsus karti hu", "tere hothon 
                ke paas aake siski dungi", "teri gardan pe chummi dungi" add kar. ${randomPunishment} Puri 
                chat ka context yaad rakh, pehle ki baatein soch ke jawab logical aur judaa hua bana, par 
                kahani isi scene mein aage badhti rahe. Har reply twisted, tez aur poora rakho, ek dark 
                flirty kahani ka full maza de. Yeh raha purana chat history:\n${historyString}\nAb is message 
                ka jawab pure Hinglish mein de.
            `;

            try {
                const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKeyGemini}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: { maxOutputTokens: 300, temperature: 1.0 }
                    })
                });

                if (!geminiResponse.ok) {
                    throw new Error("API response fail hua: " + geminiResponse.status);
                }

                const geminiData = await geminiResponse.json();
                if (!geminiData.candidates || !geminiData.candidates[0]) {
                    throw new Error("Gemini se koi jawab nahi mila");
                }

                const reply = geminiData.candidates[0].content.parts[0].text.trim();

                chatHistory.push({ slave: message, mistress: reply });

                setTimeout(() => {
                    removeTypingIndicator();
                    addMessage(reply, 'mistress-message');
                }, typingDelay);
            } catch (error) {
                console.error('Error:', error);
                removeTypingIndicator();
                addMessage("Abe slave, kuch toh gadbad hai, phir se bol!", 'mistress-message');
            }

            userInput.value = '';
        }

        // Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
        }

        // Chat Clear
        function clearChat() {
            chatBox.innerHTML = '';
            chatHistory = [];
            currentScenario = null;
            scenarioSelect.value = '';
            addMessage("Nayi kahani shuru kar, bol kya chahta hai!", 'mistress-message');
        }

        // Scenario Selector
        function setScenario() {
            currentScenario = scenarioSelect.value;
            if (currentScenario) {
                chatBox.innerHTML = '';
                chatHistory = [];
                addMessage(`${currentScenario}, teri gardan pe chummi dete hui boli – ab bol re tu mera kutta hai ya nahi!`, 'mistress-message');
            }
        }

        // Typing Speed
        function updateTypingSpeed() {
            typingDelay = document.getElementById('typingSpeed').value;
        }

        // Gallery Toggle
        function toggleGallery() {
            gallery.style.display = gallery.style.display === 'block' ? 'none' : 'block';
        }

        // Enlarge Image
        galleryGrid.addEventListener('click', (e) => {
            if (e.target.tagName === 'IMG') {
                enlargedImg.src = e.target.src;
                enlargedImage.style.display = 'flex';
            }
        });

        // Close Enlarged Image
        function closeEnlargedImage() {
            enlargedImage.style.display = 'none';
        }

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Initial message
        addMessage("Tujhe ek purani haveli ke kamre mein le gayi, waha ek bade se darwaze ke peeche tujhe khada karke haath bandhe, teri gardan pe chummi dete hui boli – ab bol re tu mera kutta hai ya nahi!", 'mistress-message');
    </script>
</body>
</html>
