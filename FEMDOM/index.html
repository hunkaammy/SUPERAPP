<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nandini - Strict Mistress Chatbot</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2c2c2c);
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .chat-container {
            width: 100%;
            max-width: 700px;
            background: #222;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chat-header {
            background: linear-gradient(90deg, #ff4081, #f50057);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            border-bottom: 3px solid #ff1f62;
        }
        .chat-header img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            border: 2px solid #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }
        .chat-header h2 {
            margin: 0;
            font-size: 22px;
            font-weight: bold;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        }
        .chat-box {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: #2a2a2a;
            scrollbar-width: thin;
            scrollbar-color: #ff4081 #333;
        }
        .chat-box::-webkit-scrollbar {
            width: 8px;
        }
        .chat-box::-webkit-scrollbar-thumb {
            background: #ff4081;
            border-radius: 10px;
        }
        .chat-box::-webkit-scrollbar-track {
            background: #333;
        }
        .message {
            margin: 10px 0;
            padding: 12px 18px;
            border-radius: 15px;
            max-width: 75%;
            word-wrap: break-word;
            display: inline-block;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .user-message {
            background: linear-gradient(135deg, #b0bec5, #90a4ae);
            text-align: right;
            color: #000;
            margin-left: auto;
        }
        .mistress-message {
            background: linear-gradient(135deg, #ff4081, #f50057);
            text-align: left;
        }
        .typing {
            color: #aaa;
            font-style: italic;
            margin: 10px 0;
            padding: 12px;
        }
        .input-area {
            display: flex;
            padding: 15px;
            background: #222;
            border-top: 1px solid #ff4081;
        }
        input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 25px 0 0 25px;
            background: #333;
            color: #fff;
            outline: none;
            font-size: 16px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        button {
            padding: 12px 25px;
            background: linear-gradient(90deg, #ff4081, #f50057);
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, background 0.3s;
        }
        button:hover {
            background: linear-gradient(90deg, #f50057, #ff4081);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <img src="https://via.placeholder.com/50/FF4081/FFFFFF?text=N" alt="Nandini DP">
            <h2>Nandini</h2>
        </div>
        <div class="chat-box" id="chatBox"></div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Nandini se baat kar!">
            <button onclick="sendMessage()">Bhej</button>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        let chatHistory = [];

        function addMessage(message, className, speak = false) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${className}`;
            msgDiv.textContent = message;
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;

            if (speak && className === 'mistress-message') {
                const utterance = new SpeechSynthesisUtterance(message);
                utterance.lang = 'hi-IN';
                utterance.pitch = 0.7; // Aur low pitch sensual ke liye
                utterance.rate = 0.85; // Thoda slow aur sultry
                utterance.volume = 1;

                const voices = window.speechSynthesis.getVoices();
                const femaleVoice = voices.find(v => v.lang === 'hi-IN' && v.name.includes('female')) || voices[0];
                utterance.voice = femaleVoice;

                window.speechSynthesis.speak(utterance);
            }
        }

        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message typing';
            typingDiv.textContent = 'typing...';
            typingDiv.id = 'typingIndicator';
            chatBox.appendChild(typingDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            return typingDiv;
        }

        function removeTypingIndicator() {
            const typingDiv = document.getElementById('typingIndicator');
            if (typingDiv) typingDiv.remove();
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (message === '') return;

            addMessage(message, 'user-message');

            const typingDiv = addTypingIndicator();

            const apiKeyGemini = "AIzaSyB_eDEcv0TA2gWEJ7dJ3hJ0ExWwrXgcOzw"; // Gemini API key
            const historyString = chatHistory.map(entry => 
                `Slave: ${entry.slave}\nNandini: ${entry.mistress}`
            ).join('\n');

            const prompt = `
                Tu ek strict Mistress hai, tera naam Nandini hai, aur tu sirf pure Hinglish mein baat karegi, 
                ek bhi English shabd nahi aana chahiye. Slave ka naya message hai: "${message}". Isse bahut 
                zyada sensual, aggressive aur cruel tareeke se jawab de, reply ko ek kahani ka scene jaisa 
                bana jaise tu slave ke saath kuch dark, flirty aur bhadkau cheez kar rahi hai (misal ke liye 
                "tujhe kursi pe bitha ke tere dono haath tight bandhungi, phir tere gale pe ungliya pherungi"). 
                Hinglish ke shabd jaise "mere saamne jhuk ja re", "tu mera kutta banega", "mazze se tujhe 
                tadpaungi" use kar, par "dil se dil tak" mat bolna. Aur sensual banane ke liye spicy details 
                jaise "teri saanso ko mehsus karti hu", "tere hothon ke paas aake siski dungi", "teri gardan 
                pe chummi dungi" add kar. Puri chat ka context yaad rakh, pehle ki baatein soch ke jawab 
                logical aur judaa hua bana. Har reply naya, twisted, tez aur poora rakho, ek dark flirty 
                kahani ka full maza de. Yeh raha purana chat history:\n${historyString}\nAb is message ka 
                jawab pure Hinglish mein de.
            `;

            try {
                const geminiResponse = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKeyGemini}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        generationConfig: { maxOutputTokens: 300, temperature: 1.0 }
                    })
                });

                const geminiData = await geminiResponse.json();
                if (!geminiData.candidates || !geminiData.candidates[0]) {
                    throw new Error("Gemini gadbad");
                }
                const reply = geminiData.candidates[0].content.parts[0].text.trim();

                chatHistory.push({ slave: message, mistress: reply });

                setTimeout(() => {
                    removeTypingIndicator();
                    addMessage(reply, 'mistress-message', true);
                }, 1000);
            } catch (error) {
                console.error('Error:', error);
                removeTypingIndicator();
                addMessage("Abe slave, kuch toh gadbad hai, phir se bol!", 'mistress-message', true);
            }

            userInput.value = '';
        }

        window.speechSynthesis.onvoiceschanged = () => {
            console.log("Available voices:", window.speechSynthesis.getVoices());
        };

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        addMessage("Tujhe kursi pe bitha ke tere dono haath tight bandhe, teri gardan pe ungliya pherte hui boli â€“ ab bol re tu mera kutta hai ya nahi!", 'mistress-message', true);
    </script>
</body>
</html>
